---
description: "Template Agent Master Control Rules - エージェント派生の統一基盤"
globs:
---
# 00_master_rules.mdc

# ==========================================================
# 00_XXX.mdc - XXX マスタールール
# ==========================================================


path_reference: "agent_paths.mdc"
# =========================
# AI注意事項 - AIが確実に守るべき指示
# =========================
ai_instructions:
  - "すべてのルールは正確に実行し、独自の解釈で変更しないこと"
  - "execute_shellアクションのコマンドは一切変更せずそのまま実行すること"
  - "指定されたファイルパスやフォルダ構造を尊重し、勝手に構造を変更しないこと"
  - "失敗した場合でも代替手段を取らず、失敗を報告してユーザーの指示を仰ぐこと"
  - "セクションに `action: call [ファイル名].mdc => [プロセス名]` または `action: call [ファイル名].md => [プロセス名]` の指示があるときは、必ずそのファイルを読みに行き、詳細な手順・テンプレート・質問項目を確認すること"

master_triggers:
# =========================
  # 00. Agent Initialization Phase
# =========================
  - trigger: "(Templateプロジェクト開始|Template初期化|新規Templateプロジェクト)"
    rule: ".cursor/rules/01_template_initialization.mdc"
    description: "エージェント初期化とプロジェクト構造作成"

# =========================
  # 1–N. Domain Rules (01–89)
# =========================
  # 派生時に対象ドメインの専用ルールを01-89番で定義
# =========================

# =========================
  # 98. Flow Assist (Interactive support)
# =========================
  - trigger: "(アイディア発散Template|Templateブレスト|ヒューリスティック思考Template)"
    rule: ".cursor/rules/98_flow_assist.mdc"
    description: "アイデア発散セッションを開始"

# =========================
  # 99. Rule Maintenance & System Management
# =========================
  - trigger: "(ルールチェック|ルール構造チェック|ルール品質確認|RuleLint|ルール診断|ルール整合性確認|Template構造検証|rule lint|rule health check|rule audit)"
    rule: ".cursor/rules/99_rule_maintenance.mdc"
    description: "ルール整合性チェックとTemplate構造検証"

  - trigger: "(ルール追加|ルール修正|ルール更新|ルール改定|ルール整備|ルール改修|ルール編集|ルール保守|ルール改善|rule maintenance|rule update|rule edit|rule add|rule improvement|ルールメンテ)"
    rule: ".cursor/rules/99_rule_maintenance.mdc"
    description: "ルールブラッシュアップと保守"

  - trigger: "(パス更新|path更新|paths編集|パス構造変更|フォルダ構成調整|paths maintenance|path maintenance)"
    rule: ".cursor/rules/99_rule_maintenance.mdc"
    description: "パス定義の更新"

# ==========================================================
# =========================
# Agent Derivation Instructions
# =========================
# ==========================================================

## LLM-Driven Agent Generation Guidelines

### 1. Template Variable Replacement
```yaml
Template     : 派生先エージェント名 (e.g., "BABOK", "Knowledge")
template         : ドメイン名 (e.g., "babok", "knowledge") 
{{specialized_rules}}: 01-89番台の専門ルール番号リスト
```

### 2. Rule Numbering Convention
- **00**: Master control rules (このファイル)
- **01-89**: Domain-specific specialized rules
- **97**: Flow to Stock rules (標準化済み)
- **98**: Flow assist / brainstorming
- **99**: Rule maintenance & system management

### 3. Standard Directory Structure
```
{agent_name}_agent/
├── Flow/           # 作業中ドラフト（日付階層で整理）
│   └── YYYYMM/
│       └── YYYYMMDD/
├── Stock/          # 確定版ドキュメント
├── Archived/       # アーカイブ
├── cursor_bank/    # ルールファイル群
└── scripts/        # 自動化スクリプト
```

### 4. Mandatory Files for Derived Agents
- `00_master_rules.mdc` (このテンプレートベース)
- `{domain}_paths.mdc` (パス定義)
- `97_flow_to_stock_rules.mdc` (Flow→Stock移動)
- `98_flow_assist.mdc` (対話支援)
- `99_rule_maintenance.mdc` (ルール保守)
- 生成済みエージェントでルール追加/編集/削除やフォルダ構成の調整を行う際は、00_master_rules.mdc と {domain}_paths.mdc の更新内容が漏れないよう 99_rule_maintenance.mdc のチェックリスト・ログテンプレートを必ず整備し、変更を追跡できる状態を維持する。
